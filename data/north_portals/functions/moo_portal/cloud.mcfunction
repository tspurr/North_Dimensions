### Change names
## AS AT Casted Cloud
# Move cloud forwards to detect what the player is looking at

say Cloud Function Called

execute at @s[tag=!mooPortal_cancelled] run tp @s ^ ^ ^0.1
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-1 ~ minecraft:crying_obsidian run function north_portals:moo_portal/low_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-2 ~ minecraft:crying_obsidian run function north_portals:moo_portal/mid_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-3 ~ minecraft:crying_obsidian run function north_portals:moo_portal/top_check
# After cloud reaches water with potential frame, run full detection

execute at @s[tag=!mooPortal_cancelled] run tp @s ^ ^ ^0.1
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-1 ~ minecraft:crying_obsidian run function north_portals:moo_portal/low_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-2 ~ minecraft:crying_obsidian run function north_portals:moo_portal/mid_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-3 ~ minecraft:crying_obsidian run function north_portals:moo_portal/top_check

execute at @s[tag=!mooPortal_cancelled] run tp @s ^ ^ ^0.1
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-1 ~ minecraft:crying_obsidian run function north_portals:moo_portal/low_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-2 ~ minecraft:crying_obsidian run function north_portals:moo_portal/mid_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-3 ~ minecraft:crying_obsidian run function north_portals:moo_portal/top_check

execute at @s[tag=!mooPortal_cancelled] run tp @s ^ ^ ^0.1
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-1 ~ minecraft:crying_obsidian run function north_portals:moo_portal/low_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-2 ~ minecraft:crying_obsidian run function north_portals:moo_portal/mid_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-3 ~ minecraft:crying_obsidian run function north_portals:moo_portal/top_check

execute at @s[tag=!mooPortal_cancelled] run tp @s ^ ^ ^0.1
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-1 ~ minecraft:crying_obsidian run function north_portals:moo_portal/low_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-2 ~ minecraft:crying_obsidian run function north_portals:moo_portal/mid_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-3 ~ minecraft:crying_obsidian run function north_portals:moo_portal/top_check

execute at @s[tag=!mooPortal_cancelled] run tp @s ^ ^ ^0.1
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-1 ~ minecraft:crying_obsidian run function north_portals:moo_portal/low_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-2 ~ minecraft:crying_obsidian run function north_portals:moo_portal/mid_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-3 ~ minecraft:crying_obsidian run function north_portals:moo_portal/top_check

execute at @s[tag=!mooPortal_cancelled] run tp @s ^ ^ ^0.1
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-1 ~ minecraft:crying_obsidian run function north_portals:moo_portal/low_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-2 ~ minecraft:crying_obsidian run function north_portals:moo_portal/mid_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-3 ~ minecraft:crying_obsidian run function north_portals:moo_portal/top_check

execute at @s[tag=!mooPortal_cancelled] run tp @s ^ ^ ^0.1
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-1 ~ minecraft:crying_obsidian run function north_portals:moo_portal/low_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-2 ~ minecraft:crying_obsidian run function north_portals:moo_portal/mid_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-3 ~ minecraft:crying_obsidian run function north_portals:moo_portal/top_check

execute at @s[tag=!mooPortal_cancelled] run tp @s ^ ^ ^0.1
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-1 ~ minecraft:crying_obsidian run function north_portals:moo_portal/low_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-2 ~ minecraft:crying_obsidian run function north_portals:moo_portal/mid_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-3 ~ minecraft:crying_obsidian run function north_portals:moo_portal/top_check

execute at @s[tag=!mooPortal_cancelled] run tp @s ^ ^ ^0.1
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-1 ~ minecraft:crying_obsidian run function north_portals:moo_portal/low_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-2 ~ minecraft:crying_obsidian run function north_portals:moo_portal/mid_check
execute at @s[tag=!mooPortal_cancelled] if block ~ ~ ~ minecraft:water[level=0] if block ~ ~-3 ~ minecraft:crying_obsidian run function north_portals:moo_portal/top_check

say Cloud Function finished